import{a as n}from"./axios-a900fd7e.js";import{P as b}from"./pie_chart-a10bd497.js";import{N as x}from"./nothing_list_view-e39fbc3e.js";import{_ as w}from"./default-user-profile-9fda0a60.js";import{_ as k,r as m,o,c as i,a as t,t as c,e as d,F as v,g as y}from"./index-84ba1e36.js";const C={name:"DashboardHome",data(){return{portList:[],user:{},pieLabels:[],pieDatasets:[],backgroundColor:[],colors:["#0293EE","#F8B250","#845BEF","#74BBFB","#003F5C","#BC5090","#868686","#FF6361","#FFA600","#1FB1FE"],info:{},options:{maintainAspectRatio:!0,aspectRatio:2,plugins:{legend:{position:"right"}},layout:{autoPadding:!1}}}},components:{PieChart:b,NothingListView:x},methods:{getImageUrl(r){const a=r;return new URL(a,import.meta.url).href},isEmptyObject(r){return Object.keys(r).length===0&&r.constructor===Object},clickMore(){this.$store.commit("setIndex",3),this.$emit("clickMoreMoveCursor",3),this.$router.push("/dashboard/stock/port/list")}},mounted(){},async beforeCreate(){console.log(`index : ${this.$store.state.sideBarStore.index}`);var r=await n.get(`${n.defaults.baseURL}api/user/auth`,{withCredentials:!0});this.user=r.data;var a={id:this.user.id,page:1,per:3},p=await n.get(`${n.defaults.baseURL}api/stock/portfolio/list`,{params:a},{withCredentials:!0});if(this.portList=p.data.portList,this.portList[0]!==void 0){var u={portIndex:this.portList[0].port_index},s=await n.get(`${n.defaults.baseURL}api/stock/portfolio/detail`,{params:u},{withCredentials:!0});this.info=s.data.portInfo;for(var e=1;e<=10;e++){if(this.info[`stock${e}`]==="")return;this.pieLabels[e-1]=this.info[`stock${e}`],this.pieDatasets[e-1]=this.info.Ratio[`stock${e}_ratio`],this.backgroundColor[e-1]=this.colors[e-1]}}}},L={id:"home"},F={class:"flex flex-wrap -mx-3"},B={class:"w-full xl:w-1/2 px-3"},j=t("p",{class:"text-xl font-semibold mb-4"},"첫 자산 포트폴리오 비중",-1),D={key:0,class:"w-full bg-white border rounded-lg p-4 mb-8 xl:mb-0"},U={class:"text-xl font-bold mb-2 flex justify-center"},E={class:"text-xs mb-2 flex justify-end"},M={key:1},P={class:"w-full h-80 flex justify-center items-center bg-white"},R={class:"w-full xl:w-1/2 px-3"},I={class:"flex justify-between"},N=t("p",{class:"text-xl font-semibold mb-4"},"최근 포트폴리오(3개만)",-1),O={key:0},V={class:"inline-block h-16 w-16 mr-4 rounded-full"},A={for:"profile_image",class:"relative cursor-pointer rounded-md h-12 w-12"},S=["src"],H={key:1,src:w,class:"rounded-full"},q={class:"font-bold text-lg mb-2"},z={class:"font-light text-sm text-slate-400"},G={key:1},J={class:"w-full h-80 flex justify-center items-center bg-white"};function K(r,a,p,u,s,e){const f=m("PieChart"),h=m("NothingListView");return o(),i("div",L,[t("div",F,[t("div",B,[j,e.isEmptyObject(s.info)?(o(),i("div",M,[t("div",P,[d(h,{imageUrl:"icons-stocks-100",content:"생성된 포트폴리오이 없습니다",showMoveContent:"true"})])])):(o(),i("div",D,[t("div",U,c(s.info.title),1),t("div",E," 총 비용 : "+c(s.info.initial_price)+"만원 ",1),d(f,{chartData:{labels:s.pieLabels,datasets:[{data:s.pieDatasets,backgroundColor:s.backgroundColor}]},chartOption:s.options},null,8,["chartData","chartOption"])]))]),t("div",R,[t("div",I,[N,t("div",{class:"mt-2 mr-2 text-sm cursor-default",onClick:a[0]||(a[0]=(...l)=>e.clickMore&&e.clickMore(...l))}," 더보기 ")]),s.portList!=""?(o(),i("div",O,[(o(!0),i(v,null,y(s.portList,(l,_)=>(o(),i("div",{class:"w-full bg-white border rounded-lg flex justify-start items-center p-5 mb-4",key:_},[t("span",V,[t("label",A,[s.user.profile_image!=null?(o(),i("img",{key:0,src:e.getImageUrl(s.user.profile_image),class:"rounded-full w-16 h-16"},null,8,S)):(o(),i("img",H)),t("input",{id:"profile_image",name:"profile_image",type:"file",class:"sr-only",onChange:a[1]||(a[1]=g=>r.onChangeProfileImage(g))},null,32)])]),t("div",null,[t("p",q,c(l.title),1),t("p",z,c(l.writer),1)])]))),128))])):(o(),i("div",G,[t("div",J,[d(h,{imageUrl:"icons-portfolio-management-64",content:"생성된 포트폴리오이 없습니다",showMoveContent:"true"})])]))])])])}const Z=k(C,[["render",K]]);export{Z as default};
