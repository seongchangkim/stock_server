import{m as b,_ as p,o as i,c as l,a as e,n as c,b as w,d as $,r as u,e as h,w as g,f as v}from"./index-84ba1e36.js";import{a as m}from"./axios-a900fd7e.js";const C={name:"Sidebar",data(){return{selectBar:1}},props:{id:String,isAuth:Boolean,role:Number,index:Number},watch:{index:{handler:function(s){this.setCursorIndex(s)}}},computed:{...b({sideBarOpen:"sideBarOpen"})},methods:{setCursorIndex(s){this.$store.commit("setIndex",s),this.selectBar=this.$store.state.sideBarStore.index,this.$emit("setChildIndex",this.selectBar),s===1?this.$router.push("/dashboard/home"):s===2?this.$router.push("/dashboard/users/list"):s===3&&this.$router.push("/dashboard/stock/port/list")}},beforeCreate(){this.selectBar=this.$store.state.sideBarStore.index},mounted(){console.log(`mounted selectBar : ${this.selectBar}`),this.selectBar=this.$store.state.sideBarStore.index}},y=e("div",{class:"w-full h-20 border-b flex px-4 items-center mb-8"},[e("p",{class:"font-semibold text-3xl text-blue-400 pl-4"},"LOGO")],-1),B={class:"mb-4 px-4"},k=e("p",{class:"pl-4 text-sm font-semibold mb-1"},"메인",-1),M=e("svg",{class:"h-6 w-6 fill-current mr-2",viewBox:"0 0 20 20"},[e("path",{d:"M18.121,9.88l-7.832-7.836c-0.155-0.158-0.428-0.155-0.584,0L1.842,9.913c-0.262,0.263-0.073,0.705,0.292,0.705h2.069v7.042c0,0.227,0.187,0.414,0.414,0.414h3.725c0.228,0,0.414-0.188,0.414-0.414v-3.313h2.483v3.313c0,0.227,0.187,0.414,0.413,0.414h3.726c0.229,0,0.414-0.188,0.414-0.414v-7.042h2.068h0.004C18.331,10.617,18.389,10.146,18.121,9.88 M14.963,17.245h-2.896v-3.313c0-0.229-0.186-0.415-0.414-0.415H8.342c-0.228,0-0.414,0.187-0.414,0.415v3.313H5.032v-6.628h9.931V17.245z M3.133,9.79l6.864-6.868l6.867,6.868H3.133z"})],-1),I=e("span",{class:"text-gray-700"},"홈",-1),S=[M,I],V={key:0,class:"mb-4 px-4"},z=e("p",{class:"pl-4 text-sm font-semibold mb-1"},"회원 관리",-1),A=e("svg",{class:"h-6 w-6 fill-current mr-2",viewBox:"0 0 20 20"},[e("path",{d:"M15.573,11.624c0.568-0.478,0.947-1.219,0.947-2.019c0-1.37-1.108-2.569-2.371-2.569s-2.371,1.2-2.371,2.569c0,0.8,0.379,1.542,0.946,2.019c-0.253,0.089-0.496,0.2-0.728,0.332c-0.743-0.898-1.745-1.573-2.891-1.911c0.877-0.61,1.486-1.666,1.486-2.812c0-1.79-1.479-3.359-3.162-3.359S4.269,5.443,4.269,7.233c0,1.146,0.608,2.202,1.486,2.812c-2.454,0.725-4.252,2.998-4.252,5.685c0,0.218,0.178,0.396,0.395,0.396h16.203c0.218,0,0.396-0.178,0.396-0.396C18.497,13.831,17.273,12.216,15.573,11.624 M12.568,9.605c0-0.822,0.689-1.779,1.581-1.779s1.58,0.957,1.58,1.779s-0.688,1.779-1.58,1.779S12.568,10.427,12.568,9.605 M5.06,7.233c0-1.213,1.014-2.569,2.371-2.569c1.358,0,2.371,1.355,2.371,2.569S8.789,9.802,7.431,9.802C6.073,9.802,5.06,8.447,5.06,7.233 M2.309,15.335c0.202-2.649,2.423-4.742,5.122-4.742s4.921,2.093,5.122,4.742H2.309z M13.346,15.335c-0.067-0.997-0.382-1.928-0.882-2.732c0.502-0.271,1.075-0.429,1.686-0.429c1.828,0,3.338,1.385,3.535,3.161H13.346z"})],-1),O=e("span",{class:"text-gray-700"},"회원 목록",-1),U=[A,O],H={class:"mb-4 px-4"},N=e("p",{class:"pl-4 text-sm font-semibold mb-1"},"자산 포트폴리오",-1),L=e("svg",{class:"h-6 w-6 fill-current mr-2",viewBox:"0 0 20 20"},[e("path",{d:"M17.431,2.156h-3.715c-0.228,0-0.413,0.186-0.413,0.413v6.973h-2.89V6.687c0-0.229-0.186-0.413-0.413-0.413H6.285c-0.228,0-0.413,0.184-0.413,0.413v6.388H2.569c-0.227,0-0.413,0.187-0.413,0.413v3.942c0,0.228,0.186,0.413,0.413,0.413h14.862c0.228,0,0.413-0.186,0.413-0.413V2.569C17.844,2.342,17.658,2.156,17.431,2.156 M5.872,17.019h-2.89v-3.117h2.89V17.019zM9.587,17.019h-2.89V7.1h2.89V17.019z M13.303,17.019h-2.89v-6.651h2.89V17.019z M17.019,17.019h-2.891V2.982h2.891V17.019z"})],-1),D=e("span",{class:"text-gray-700"},"목록",-1),F=[L,D];function R(s,t,d,_,o,r){return i(),l("div",{class:c(["w-1/3 lg:w-64 fixed md:top-0 md:left-0 h-screen lg:block bg-gray-100 border-r z-30",s.sideBarOpen?"":"hidden"]),id:"main-nav"},[y,e("div",B,[k,e("div",null,[e("div",{class:c(["w-full flex items-center text-blue-400 h-10 pl-4 hover:bg-gray-200 rounded-lg cursor-pointer",o.selectBar==1?"active":""]),onClick:t[0]||(t[0]=n=>r.setCursorIndex(1))},S,2)])]),d.isAuth==!0&&d.role==1?(i(),l("div",V,[z,e("div",{class:c(["w-full flex items-center text-blue-400 h-10 pl-4 hover:bg-gray-200 rounded-lg cursor-pointer",o.selectBar==2?"active":""]),onClick:t[1]||(t[1]=n=>r.setCursorIndex(2))},U,2)])):w("",!0),e("div",H,[N,e("div",{class:c(["w-full flex items-center text-blue-400 h-10 pl-4 hover:bg-gray-200 rounded-lg cursor-pointer",o.selectBar==3?"active":""]),onClick:t[2]||(t[2]=n=>r.setCursorIndex(3))},F,2)])],2)}const j=p(C,[["render",R]]);m.defaults.baseURL="http://127.0.0.1:8080/";const G={name:"Navbar",props:{user:Object,isAuth:Boolean,profileImage:String},computed:{...$(["sideBarOpen","user"])},data(){return{dropDownOpen:!1}},computed:{getImageUrl(){const s=this.profileImage==null?"/src/assets/default-user-profile.png":this.profileImage;return new URL(s,import.meta.url).href}},methods:{toggleSidebar(){this.$store.commit("toggleSidebar")},async logout(){console.log(this.user.data),console.log(`userId : ${this.user.data.id}`),console.log("logout!!");var s={userId:this.user.data.id};await m.post(`${m.defaults.baseURL}api/user/logout`,s,{withCredentials:!0}).then(t=>{this.$store.commit("setUser",{}),this.$store.commit("setIndex",1),this.$router.push("/login")})}},mounted(){console.log(`${this.$store}`)}},P={class:"sticky top-0 z-40"},E={class:"w-full h-20 px-6 bg-gray-100 border-b flex items-center justify-between"},T={class:"flex"},q={class:"inline-block lg:hidden flex items-center mr-4"},J={class:"h-5 w-5",style:{fill:"black"},viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},K=e("title",null,"Menu",-1),Q=e("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"},null,-1),W=[K,Q],X={key:0},Y={key:1,class:"flex items-center relative"},Z=["src"];function ee(s,t,d,_,o,r){const n=u("router-link");return i(),l("div",P,[e("div",E,[e("div",T,[e("div",q,[e("button",{class:"hover:text-blue-500 hover:border-white focus:outline-none navbar-burger",onClick:t[0]||(t[0]=a=>r.toggleSidebar())},[(i(),l("svg",J,W))])])]),d.isAuth?(i(),l("div",Y,[e("img",{src:r.getImageUrl,class:"w-12 h-12 rounded-full shadow-lg",onClick:t[1]||(t[1]=a=>o.dropDownOpen=!o.dropDownOpen)},null,8,Z)])):(i(),l("div",X,[h(n,{to:"/login"},{default:g(()=>[v("로그인")]),_:1})]))]),e("div",{class:c(["absolute bg-gray-100 border border-t-0 shadow-xl text-gray-700 rounded-b-lg w-48 bottom-100 right-0 mr-6",o.dropDownOpen?"":"hidden"])},[e("div",{onClick:t[2]||(t[2]=(...a)=>s.moveUserProfile&&s.moveUserProfile(...a)),class:"block px-4 py-2 hover:bg-gray-200"},[h(n,{to:"/dashboard/users/profile"},{default:g(()=>[v(" 프로필 정보 ")]),_:1})]),e("div",{onClick:t[3]||(t[3]=(...a)=>r.logout&&r.logout(...a)),class:"block px-4 py-2 hover:bg-gray-200"}," 로그아웃 ")],2)])}const se=p(G,[["render",ee]]),te={name:"Footer"},oe={class:"w-full border-t-2 px-8 py-6 lg:flex justify-between items-center"},re=e("p",{class:"mb-2 lg:mb-0"},"© Copyright 2020",-1),ie=[re];function le(s,t,d,_,o,r){return i(),l("div",oe,ie)}const ne=p(te,[["render",le]]),ae={name:"Dashboard",data(){return{id:"",user:{},isAuth:!1,role:0,profileImage:"",index:1}},computed:b({sidebar:"sideBarOpen",user:"getUser"}),components:{Sidebar:j,Navbar:se,Footer:ne},methods:{clickMoreMoveCursor(s){console.log(`index : ${s}`),this.index=s}},async beforeCreate(){this.user=await m.get(`${m.defaults.baseURL}api/user/auth`,{withCredentials:!0}),this.user.data.isAuth||this.$router.push("/login"),this.id=this.user.data.id===void 0?"":this.user.data.id,this.isAuth=this.user.data.isAuth,this.role=this.user.data.role,this.profileImage=this.user.data.profile_image,this.$store.commit("setUser",this.user.data)}},de={class:"leading-normal tracking-normal",id:"main-body"},ce={class:"flex flex-wrap"},he={class:"p-6 bg-gray-100 mb-20"};function ue(s,t,d,_,o,r){const n=u("Sidebar"),a=u("Navbar"),f=u("router-view"),x=u("Footer");return i(),l("div",de,[e("div",ce,[h(n,{id:o.id,isAuth:o.isAuth,role:o.role,index:o.index,onSetChildIndex:r.clickMoreMoveCursor},null,8,["id","isAuth","role","index","onSetChildIndex"]),e("div",{class:c(["w-full bg-gray-100 pl-0 lg:pl-64 min-h-screen",s.sideBarOpen?"overlay":""]),id:"main-content"},[h(a,{user:o.user,isAuth:o.isAuth,profileImage:o.profileImage},null,8,["user","isAuth","profileImage"]),e("div",he,[h(f,{onClickMoreMoveCursor:r.clickMoreMoveCursor},null,8,["onClickMoreMoveCursor"])]),h(x)],2)])])}const _e=p(ae,[["render",ue]]);export{_e as default};
